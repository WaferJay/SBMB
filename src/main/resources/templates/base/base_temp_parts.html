<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="temp_header(title, tags)">
    <meta charset="UTF-8">
    <title th:text="${title}"></title>
    <link rel="stylesheet" th:href="@{/static/css/base.css}">
    <link rel="stylesheet" th:href="@{/static/css/main.css}">
    <link rel="stylesheet" th:href="@{/static/css/alert.css}">
    <script th:src="@{/static/js/lib/alert.js}"></script>
    <script th:src="@{/static/js/common.js}"></script>
    <script th:src="@{/static/js/lib/require.js}"></script>
    <link th:replace="${tags}">

    <script th:inline="javascript">
        /*[+
        window.config = {
            API_CONF: {
                MicroBlog: {
                    MICROBLOG_BASE: [[@{/ajax/microblog}]],
                    MICROBLOG_SPECIFIC: [[@{/ajax/microblog/{id}}]],
                    MICROBLOG_LIKE: [[@{/ajax/microblog/like}]],
                    MICROBLOG_USER: [[@{/ajax/user/{uid}/microblog}]],
                    MICROBLOG_SUBSCRIBE: [[@{/ajax/microblog/subscribed}]]
                },
                Comment: {
                    COMMENT_BASE: [[@{/ajax/microblog/{mid}/comment}]]
                },
                Image: {
                    IMAGE_SPECIFIC_ID: [[@{/upload/images/{id}}]],
                    IMAGE_UPLOAD: [[@{/image/upload}]]
                },
                Subscribe: {
                    SUBSCRIBE: [[@{/ajax/user/{uid}/subscribe}]],
                    UNSUBSCRIBE: [[@{/ajax/user/{uid}/unsubscribe}]],
                    FOLLOWER: [[@{/ajax/user/{uid}/follower}]],
                    FOLLOWING: [[@{/ajax/user/{uid}/following}]]
                }
            }
        };
        window._current_user = [[${session._current_logged_in_user}]];
        +]*/
        require.config({
            baseUrl: /*[[ @{/static/js/} ]]*/ "/static/js/"
        });
    </script>

</head>

<div id="footer" th:fragment="temp_footer">
    <div id="go-top" data-href="body">
        <i class="icon top"></i>
    </div>
    <script>
        require(["lib/scroll"], function (scroll) {
            var top = document.querySelector("#go-top");
            scroll.handleAnchor(top);

            addEventListener(document, "scroll", function (event) {
                var scrollTop = scroll.top();

                if (scrollTop <= 20) {
                    top.style.visibility = "hidden";
                } else {
                    top.style.visibility = "visible";
                }
            });
        });
    </script>
</div>

<div th:fragment="user_info(user)" class="fragment">
    <table id="user-info-detail">
        <tbody>
        <tr>
            <td class="text-small">用户:</td>
            <td class="text-small" th:text="${user.name}"></td>
        </tr>
        <tr>
            <td class="text-small">邮箱:</td>
            <td class="text-small" th:text="${user.email}"></td>
        </tr>
        <tr>
            <td class="text-small">注册时间:</td>
            <td class="text-small" th:text="${#dates.format(user.registerTimestamp, 'yyyy年MM月dd日 HH:mm:ss')}"></td>
        </tr>
        </tbody>
    </table>
</div>

<div th:fragment="user_overview(user)" class="fragment">
    <ul id="user-overview" class="list-inline list-divide list-stretch">
        <li>
            <h4>关注</h4>
            <span class="text-small" th:text="${user.followingCount}">0</span>
        </li>
        <li>
            <h4>粉丝</h4>
            <span class="text-small" th:text="${user.followerCount}">0</span>
        </li>
        <li>
            <h4>微博</h4>
            <span class="text-small" th:text="${user.blogCount}">0</span>
        </li>
    </ul>
</div>
</html>